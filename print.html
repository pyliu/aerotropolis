<!DOCTYPE html>
<html lang="zh-TW">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="For Aviation City use only">
    <meta name="author" content="LIU, PANG-YU">
    <meta http-equiv="pragma" content="no-cache">
    <meta http-equiv="expires" content="0">
    <meta http-equiv="cache-control" content="no-cache">
    <title>桃園市地政局航空城開發科</title>
    <!-- Bootstrap core CSS -->
    <link rel="preload" href="assets/css/bootstrap.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <link rel="preload" href="assets/css/loading.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <link rel="preload" href="assets/css/loading-btn.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <link rel="preload" href="assets/css/animate.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <link rel="preload" href="assets/css/awesome-font.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <link rel="preload" href="assets/css/bootstrap-vue.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <link rel="preload" href="assets/css/aerotropolis.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
</head>

<body>
    <main role="main" class="container">

        <div id="print"></div>

    </main><!-- /.container -->

    <!-- Place scripts at the end of the body to let DOM load first then scripts  -->
    <!-- Bootstrap core JavaScript -->
    <script src="assets/js/jquery.min.js"></script>
    <script src="assets/js/popper.min.js"></script>
    <script src="assets/js/bootstrap.min.js"></script>
    <!-- Vue -->
    <script src="assets/js/vue.js"></script>
    <script src="assets/js/vuex.js"></script>
    <script src="assets/js/bootstrap-vue.min.js"></script>
    <script src="assets/js/bootstrap-vue-icons.min.js"></script>
    <!-- Add-On -->
    <script src="assets/js/axios.min.js"></script>
    <script src="assets/js/localforage.min.js"></script>
    <script>
        const printVue = new Vue({
            el: '#print',
            template:`<b-card :title="code + ' ' + name" :sub-title="number">
                <hr />
                <b-card-text v-html="content"></b-card-text>
            </b-card>`,
            data: () => ({
                landData: undefined
            }),
            computed: {
                code() { return this.landData ? this.landData.code : '' },
                name() { return this.landData ? this.landData.name : '' },
                number() { return this.landData ? this.landData.number.slice(0, 4) + '-' + this.landData.number.slice(4) : '' },
                content() { return this.landData ? this.landData.content.trim().replace(/\n/g, '<br />') : '' }
            },
            mounted() {
                const urlParams = new URLSearchParams(window.location.search);

                let formData = new FormData();
                formData.append("owned_number", urlParams.get('number'));
                axios.post("api/query_land_data.php", formData).then((res) => {
                    this.landData = res.data.result[0];
                    setTimeout(() => window.print(), 500);
                }).catch((err) => console.error(err)).finally(() => { });
            }
        });
    </script>
</body>

</html>